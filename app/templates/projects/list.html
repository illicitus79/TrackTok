{% extends "base.html" %}

{% block title %}Projects - TrackTok{% endblock %}

{% block content %}
<div class="container" style="padding: 2rem 0;">
  <header class="page-header" style="margin-bottom: 1.5rem;">
    <div class="page-title-group">
      <h1 style="margin: 0;">Projects</h1>
      <p class="page-subtitle" style="margin: 0.25rem 0 0;">All projects for your tenant.</p>
    </div>
    <div class="page-actions">
      <a href="{{ url_for('web.project_new') }}" class="btn btn-primary">New Project</a>
      <a href="{{ url_for('web.dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
    </div>
  </header>

  {% if projects %}
  <div class="card">
    <div class="card-body" style="padding: 0; overflow: hidden;">
      <div class="table-responsive">
        <table class="table stackable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Status</th>
              <th>Budget</th>
              <th>Dates</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for project in projects %}
            <tr>
              <td data-label="Name" style="font-weight: 600;">{{ project.name }}</td>
              <td data-label="Status"><span class="badge badge-success">{{ project.status }}</span></td>
              <td data-label="Budget">{{ format_money(project.starting_budget|float) }}</td>
              <td data-label="Dates">
                {% if project.start_date %}{{ project.start_date.strftime('%b %d, %Y') }}{% else %}N/A{% endif %}
                {% if project.end_date %} â€“ {{ project.end_date.strftime('%b %d, %Y') }}{% endif %}
              </td>
              <td data-label="Actions" class="table-actions">
                <a href="{{ url_for('web.project_detail', project_id=project.id) }}" class="btn btn-secondary btn-sm">Open</a>
                <a href="{{ url_for('web.project_edit', project_id=project.id) }}" class="btn btn-secondary btn-sm">Edit</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% else %}
  <div class="card">
    <div class="card-body" style="text-align: center;">
      <p style="color: var(--text-muted); margin-bottom: 1rem;">No projects yet.</p>
      <a href="{{ url_for('web.dashboard') }}" class="btn btn-primary">Go to Dashboard</a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
