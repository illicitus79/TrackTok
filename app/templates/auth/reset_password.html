{% extends "base.html" %}

{% block title %}Reset Password - TrackTok{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1>Create a new password</h1>
      <p>Choose a strong password to secure your account.</p>
    </div>

    <form method="POST" class="auth-form">
      {{ form.hidden_tag() }}
      {{ form.token() }}

      <div class="form-group">
        <label for="password" class="form-label">
          New password
          <span class="required">*</span>
        </label>
        {{ form.password(class="form-input", placeholder="At least 8 characters", autocomplete="new-password") }}
        {% if form.password.errors %}
        <div class="form-error">
          {% for error in form.password.errors %}
          <span>{{ error }}</span>
          {% endfor %}
        </div>
        {% else %}
        <p class="form-hint">Use a mix of letters, numbers, and symbols.</p>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="password_confirm" class="form-label">
          Confirm password
          <span class="required">*</span>
        </label>
        {{ form.password_confirm(class="form-input", placeholder="Re-enter password", autocomplete="new-password") }}
        {% if form.password_confirm.errors %}
        <div class="form-error">
          {% for error in form.password_confirm.errors %}
          <span>{{ error }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </div>

      <button type="submit" class="btn btn-primary btn-block">Update password</button>
    </form>

    <div class="auth-footer">
      <p>
        Remembered it?
        <a href="{{ url_for('web.login') }}" class="gradient-text">Back to sign in</a>
      </p>
    </div>
  </div>

  <div class="auth-gradient gradient-bg-indigo"></div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const error = document.querySelector(".form-error");
    if (error) {
      const input = error.previousElementSibling;
      if (input && input.tagName === "INPUT") {
        input.focus();
      }
    }
  });
</script>
{% endblock %}
